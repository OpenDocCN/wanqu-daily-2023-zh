- en: GitHub replaces code search engine with Rust-based Blackbird • The Register
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://www.theregister.com/2023/05/09/blackbird_github_search/](https://www.theregister.com/2023/05/09/blackbird_github_search/)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: GitHub's reworked Rust-based code search engine entered general availability
    on Monday, promising faster, more comprehensive explorations of software repositories.
  prefs: []
  type: TYPE_NORMAL
- en: The revision, dubbed Blackbird internally, has been three years in the making,
    and is part of the corporation's enduring effort to make text-based search techniques
    more effective on queries of computer code.
  prefs: []
  type: TYPE_NORMAL
- en: '"Our goal with the new code search and code view is to enable developers to
    quickly search, navigate and understand their code, put critical information into
    context, and ultimately make them more productive," said Colin Merkel, a GitHub
    software engineer, in an [announcement](https://github.blog/2023-05-08-github-code-search-is-generally-available/).'
  prefs: []
  type: TYPE_NORMAL
- en: Founded in 2008, GitHub initially used Apache Solr to handle its code search.
    Then, after Solr was folded into Lucene, the collaborative code biz built a new
    search service [using Elasticsearch](https://github.blog/2013-01-23-a-whole-new-code-search/)
    in 2013\. [Outages followed](https://github.blog/2013-02-04-recent-code-search-outages/)
    and by 2020 – two years after Microsoft acquired the company – work on Blackbird
    commenced.
  prefs: []
  type: TYPE_NORMAL
- en: 'The goals for the project were: to index all source code on GitHub; to support
    incremental indexing and document deletion, and to provide fast exact-match and
    regex queries (< 1 second for 95 percent of users on global queries, and faster
    still for more narrowly scoped queries); to integrate without GitHub code info;
    and to do so without expanding resource demands on GitHub''s existing Elasticsearch
    cluster.'
  prefs: []
  type: TYPE_NORMAL
- en: An off-the-shelf tool capable of the above did not exist, so GitHub committed
    to Blackbird, written in Rust, [as the biz discussed](https://www.theregister.com/2023/02/07/github_code_search/)
    in February. The resulting system can manage about 640 queries per second, compared
    to about 0.01 queries per second for [ripgrep](https://github.com/BurntSushi/ripgrep),
    thanks to precomputed search indices that map numeric keys to values and other
    architectural improvements. And it can index at a rate of roughly 120,000 documents
    per second.
  prefs: []
  type: TYPE_NORMAL
- en: '"It is incredibly fast (about twice as fast as the old code search), far more
    capable (supporting substring queries, regular expressions, and symbol search),
    and understands code, putting the most relevant results first," explained Merkel.'
  prefs: []
  type: TYPE_NORMAL
- en: Beyond the [technical fiddling](https://github.blog/2023-02-06-the-technology-behind-githubs-new-code-search/)
    necessary to index and query 45 million repositories (which excludes many redundant
    forks), GitHub's new [code search](https://docs.github.com/en/search-github) engine
    has been framed with search interface improvements that show suggestions and competitions,
    and with a redesigned code view that brings search, browsing, and code navigation
    together.
  prefs: []
  type: TYPE_NORMAL
- en: The result finds specific text across repos works rather well. Take trying to
    locate values associated with the "memory" key in YAML configuration files for
    a Kubernetes cluster. GitHub code search makes it easy to focus only on YAML files.
  prefs: []
  type: TYPE_NORMAL
- en: That kind of precise filtering is also useful when trying to identify which
    particular part of an application produced a specific error message.
  prefs: []
  type: TYPE_NORMAL
- en: Merkel says that GitHub's goal with the new code search and code view is to
    help developers find important information scattered across their codebase, to
    contextualize that information, and to make developers more productive. ®
  prefs: []
  type: TYPE_NORMAL
